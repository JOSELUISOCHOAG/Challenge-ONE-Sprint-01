<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <title>Challenge ONE Sprint 01</title>
  </head>
  <body>
    <head>
      <h1></h1>
    </head>
    <main>
      <div class="cuadro-texto">
        <!-- <p>Texto <input type="textarea" name="texto1" value="Texto de prueba" class="texto1"> </p> -->
        <label for="texto1">Texto a Encriptar</label>
        <textarea name="texto1" id="texto1" cols="30" rows="10"></textarea>
      </div>
      <div class="botones">
        <button id="btn-encripta">Encriptar</button>
        <button id="btn-desencripta">Desencriptar</button>
      </div>
      <div class="cuadro-mostrar">
        <!-- <p>resultado <input type="textarea" name="texto2" class="texto2"> </p> -->
        <label for="texto2">Texto encriptado</label>
        <textarea name="texto2" id="texto2" cols="30" rows="10"></textarea>
        <button id="btn-copiar">Copiar resultado</button>
      </div>
    </main>
    <footer></footer>
  </body>

  <script>
    var reglaLetras = ["a", "e", "i", "o", "u"];
    var reglaCambio = ["ai", "enter", "imes", "ober", "ufat"];
    var fraseUsuario = document.getElementById("texto1");
    var fraseResultado = document.getElementById("texto2");
    var btnEncripta = document.getElementById("btn-encripta");
    var btnDesencripta = document.getElementById("btn-desencripta");
    var btnCopiar = document.getElementById("btn-copiar");

    function encriptar() {
      var fraseOriginal = fraseUsuario.value;
      if (fraseOriginal.length <= 0) {
        alert("Texto no puede estar vacio");
        fraseUsuario.focus();
        return;
        }

      var fraseCambiada = "";
      var caracter = "";
      for (i = 0; i <= fraseOriginal.length; i++) {
        caracter = fraseOriginal.charAt(i);
        if (reglaLetras.indexOf(caracter) >= 0) {
          /* alert(caracter+" "+reglaLetras.indexOf(caracter)+" "+reglaCambio[reglaLetras.indexOf(caracter)]) */
          fraseCambiada = fraseCambiada + reglaCambio[reglaLetras.indexOf(caracter)];
          } 
        else {
          fraseCambiada = fraseCambiada + caracter;
          }
      }
      fraseResultado.value = fraseCambiada;
      btnCopiar.focus();
      return;
    }

    function desencriptar(frase) {
      var fraseOriginal = fraseUsuario.value;
      var fraseCambiada = "";
      var caracter = "";
      var pos=0;
      while (pos<=fraseOriginal.length) {
        caracter = fraseOriginal.charAt(pos);
        if (reglaLetras.indexOf(caracter) >= 0){
            fraseCambiada = fraseCambiada + reglaLetras[reglaLetras.indexOf(caracter)];
            pos = pos + reglaCambio[reglaLetras.indexOf(caracter)].length;       
        }
        else {
            fraseCambiada = fraseCambiada + caracter;
            pos = pos +1;
        }
      }
      fraseResultado.value = fraseCambiada;
      btnCopiar.focus();
    }

    document.write("<p>lorem ipsum</p>");

    btnEncripta.onclick = encriptar;

    btnDesencripta.onclick = desencriptar;
  </script>
</html>
